The json api expects serialized json objects with the following structure on requests: 

{
    auth:{
        user:"User login goes here",
        hash:"User hash goes here"},
    parameters:{keys and values to be sent},
    captchaId: "Id of current captcha"
}

And will respond with serialized json objects with the following structure:

{
    auth:{
        authStatus:"Status of authentication",
        newHash: "Possible new hash for the user"},
    status:"status of the operation",
    data: "Any kind of data to be returned will be in this field"
}

The authstatus can be either 'ok' or 'expired', in which case the user hash must be replaced by the content of 'newHash'.

The global status are:
    error: internal server occurred. The error string will be on the data field.
    blank: parameter was sent in blank. The parameter will be on the data field.
    tooLarge: request body is too large.
    fileParseError: error when trying to parse an uploaded file.
    parseError: error when parsing the request itself.
    construction: page is under construction and unavailable.
    fileTooLarge: sent file is too large.
    denied: user is not allowed to perform the requested operation.
    ok: operation successful.
    maintenance: site is going under maintenance.
    formatNotAllowed: an uploaded file has a format that is now allowed.
    banned: user is banned. In this case, data will contain and object with the following fields: reason, board, expiration.
    hashBan: user tried to upload a banned file. In this case, data will contain an array where each object contains the following fields:
        file: name provided for the file.
        boardUri: board uri of the hash ban. If not informed, the file is banned globally.

The back-end will truncate strings longer than the maximum length.
Files should be sent in a parameter called 'files' containing an array where each object contains the following fields:
spoiler(Boolean): indicates that the individual file should be spoiled without making all files in the post spoilered. Only used for posting threads or replies.
name: original name of the file.
content: content of the file using base64 encoding. Example of content: 
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAIAAAAiZtkUAAAAA3NCSVQICAjb4U/gAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAABVJREFUCJlj/P//PwMqYGLAAMQJAQDengMFOtjosAAAAABJRU5ErkJggg==

------------------------------------------------------------------------------------------

PAG_ID::01

Name: newThread

Description: creates a new thread. Accepts files.

Parameters:
    name: name of the poster. 32 characters.
    email: e-mail of the poster. 64 characters.
    message*: message to be posted. 2048 characters.
    subject: subject of the thread. 128 characters.
    boardUri*: uri of the board.
    password: password to be used for deletion. 8 characters.
    flag: id of a flag to be used.
    captcha: captcha input.
    spoiler(Boolean): indicates if the images should be spoilered.

Output(Number): id of the new thread.

------------------------------------------------------------------------------------------

PAG_ID::02

Name: replyThread

Description: post a reply to a thread. Accepts files.

Parameters:
    name: name of the poster. 32 characters.
    email: e-mail of the poster. 64 characters.
    message*: message to be posted. 2048 characters.
    subject: subject of the thread. 128 characters.
    flag: id of a flag to be used.
    boardUri*: uri of the board.
    threadId*: id of the thread.
    password: password to be used for deletion. 8 characters.
    captcha: captcha input.
    spoiler(Boolean): indicates if the images should be spoilered.

Output(Number): id of the new post.

------------------------------------------------------------------------------------------

PAG_ID::03**(Removed)

Name: listBoards

Description: list the boards available.

Output(Array): array with available boards. Each object contains the following structure:
    boardUri: uri of the board.
    boardName: name of the board.

------------------------------------------------------------------------------------------

PAG_ID::04

Name: registerAccount

Description: creates a new user account.

Parameters:
    login*: login of the account. 16 characters. Only a-Z,_ and 0-9 allowed.
    password*: password of the account.
    email: e-mail of the account. 64 characters.
    captcha: input for captcha.

Output: the hash of the recently created session for the account.

------------------------------------------------------------------------------------------

PAG_ID::05

Name: login

Description: performs login of the user.

Parameters: 
    login: login of the account. 
    password: password of the account.

Output: hash of the new session of the user.

------------------------------------------------------------------------------------------

PAG_ID::06

Name: requestAccountRecovery

Description: sends an e-mail to the user with a link so he can recover his account.

Parameters:
    login: login of the account.
    captcha: captcha input.

------------------------------------------------------------------------------------------

PAG_ID::07

Name: createBoard

Description: creates a new board. Requires validation.

Parameters:
    boardUri: uri of the new board. 32 characters, lower case and numbers only.
    boardName: name of the new board. 32 characters.
    boardDescription: description of the new board. 128 characters.
    captcha: input for captcha.

------------------------------------------------------------------------------------------

PAG_ID::11

Name: setGlobalRole

Description: changes the global role of an user. Requires validation.

Parameters:
    login: login of the user.
    role(Number): new role of the user.

------------------------------------------------------------------------------------------

PAG_ID::12

Name: setVolunteer

Description: adds or remove a volunteer from a board. Requires validation. Allowed only for board owners.

Parameters:
    login: login of the user to be either removed or added to the list of board volunteers.
    boardUri: board to have its list of volunteers managed.
    add(Boolean): indicates if the user is to be added or removed from the list of volunteers.

------------------------------------------------------------------------------------------

PAG_ID::13

Name: transferBoardOwnership

Description: transfers the board to another user. Requires validation. Allowed only for board owners.

Parameters:
    boardUri: board to be transfered.
    login: login of the new owner.

------------------------------------------------------------------------------------------

PAG_ID::14

Name: deleteContent

Description: deletes posts or threads. If the password is not provided, authentication is required.

Parameters:
    password: password to be used for deletion.
    deleteUploads(Boolean): indicates that only the files, and not the threads and posts are to be deleted.
    postings(Array): array of content to be deleted. Contains objects with the following fields:
        board: board to which the content belongs.
        thread: thread to be deleted or that contains the post to be deleted.
        post: post to be deleted.

------------------------------------------------------------------------------------------

PAG_ID::15

Name: deleteBoard

Description: deletes a board. Requires validation. Allowed for board owners and users with global role lower than 2.

Parameters:
    boardUri: uri of the board to be deleted.

------------------------------------------------------------------------------------------

PAG_ID::16

Name: reportContent

Description: reports posts or threads.

Parameters: 
    reason: reason of the report. 256 characters.    
    captcha: captcha input.
    global(Boolean): indicates if the reports are global.
    postings(Array): array of content to be reported. Contains objects with the following fields:
        board: board to which the content belongs.
        thread: thread to be reported or that contains the post to be reported.
        post: post to be reported.
    
------------------------------------------------------------------------------------------

PAG_ID::17

Name: closeReport

Description: closes a report. Requires authentication.

Parameters:
    reportId: id of the report to be closed.

------------------------------------------------------------------------------------------

PAG_ID::18

Name: changeThreadSettings

Description: change lock and pin settings of a thread.

Parameters:
    boardUri: board that contains the thread.
    threadId: id of the thread.
    lock(Boolean): indicates if the thread must be locked.
    pin(Boolean): indicates if the thread must be pinned.
    cyclic(Boolean): indicates if the thread must be on cyclic mode.
    
------------------------------------------------------------------------------------------

PAG_ID::19

Name: banUsers

Description: ban the ips of the selected posts and/or threads.

Parameters:
    reason: reason of the report. 256 characters.  
    expiration: date able to be converted to a new Date of when the bans should expire.
    global(Boolean): indicates if the bans are global.
    banMessage: message to be displayed in the banned content.
    postings(Array): array of content to be banned. Contains objects with the following fields:
        board: board to which the content belongs.
        thread: thread to be banned or that contains the post to be banned.
        post: post to be banned.

------------------------------------------------------------------------------------------

PAG_ID::20

Name: liftBan

Description: removes a ban. Requires authentication.

Parameters:
    banId: id of the ban to be lifted.

------------------------------------------------------------------------------------------

PAG_ID::21

Name: changeAccountSettings

Description: changes general account settings.

Parameters:
    email: new e-mail of the account. 64 characters.
    settings(Array): new settings for the account. May hold the following values:
        alwaysSignRole: indicates the user wishes to always use his role signature on posts.

------------------------------------------------------------------------------------------

PAG_ID::22

Name: changeAccountPassword

Description: changes account password.

Parameters: 
    password: current password.
    newPassword: new password.
    confirmation: repeat of new password.

------------------------------------------------------------------------------------------

PAG_ID::23

Name: createBanner

Description: adds a new banner to the board. Accepts files. Requires an image as the first image sent. Uses only the first file. Requires authentication. Restricted to the board owner.

Parameters:
    boardUri: board to add the banner to.

------------------------------------------------------------------------------------------

PAG_ID::24

Name: deleteBanner

Description: deletes a banner. Requires authentication. Restricted to the board owner.

Parameters:
    bannerId: unique identifier of the banner.

------------------------------------------------------------------------------------------

PAG_ID::25

Name: setBoardSettings

Description: changes board settings. Requires authentication. Restricted to the board owner.

Parameters:
    boardUri*: board uri.
    boardMessage: new message of the board. 256 characters.
    boardName*: new name of the board. 32 characters.
    autoCaptchaLimit(Number): a limit that automatically enables captcha if these many threads are created within an hour.
    boardDescription*: new description of the board. 128 characters.
    tags(Array): array of tags to be used on this board.
    anonymousName: name to be used when the user is anonymous. 32 character.
    hourlyThreadLimit(Number): limit of new threads allowed per hour. If exceeded, the board will lock for thread creation temporarily.
    settings(Array): new settings of the board. May contain the following values:
        disableIds: ids on threads and posts will be disabled.
        disableCaptcha: captchas will be disabled.
        forceAnonymity: the name input is disabled on posting.
        allowCode: the use of [code] is allowed.
        early404: will delete threads after one hour if they do not receive at least 5 replies.
        unindex: the board will not be displayed on the top boards or the boards list.
        archive: enables archiving of content, if the site allows archiving.
        blockDeletion: disables user deletion of content.

------------------------------------------------------------------------------------------

PAG_ID::26

Name: createFilter

Description: page used to create filters . Uses get parameters. Reserved to board owners. Requires authentication.

Parameters:
    boardUri: uri of the board to have its filters managed.
    originalTerm: word to be filtered. 32 characters.
    replacementTerm: world to be filtered to. 32 characters.

------------------------------------------------------------------------------------------

PAG_ID::27

Name: deleteFilter

Description: page used to delete filters of a board. Uses get parameters. Reserved to board owners. Requires authentication.

Parameters:
    boardUri: uri of the board to have its filter deleted.
    filterIdentifier: identification of the filter to be deleted.

------------------------------------------------------------------------------------------

PAG_ID::28

Name: placeRangeBan

Description: creates a range ban. Requires authentication. Global range bans are restricted to users with global role lower than 3.

Parameters:
    boardUri: if not informed, the range ban will be global.
    range: range to be banned.    

------------------------------------------------------------------------------------------

PAG_ID::29

Name: placeHashBan

Description: creates a hash ban that will keep files with this hash to be posted. Requires authentication. Global hash bans require global role lower than 3.

Parameters:
    boardUri: if not informed, the hash ban will be global.
    hash: banned md5 hash. 32 characters.

------------------------------------------------------------------------------------------

PAG_ID::30

Name: liftHashBan

Description: Lifts a hash ban. Requires authentication.

Parameters:
    hashBanId: id of the hash ban to be removed.

------------------------------------------------------------------------------------------

PAG_ID::31

Name: setCustomCss

Description: Uploads a custom css for a board. Requires authentication. Allowed only for board owners. If no file is sent, any set file will be removed.

Parameters:
    boardUri: uri of the board to have it's custom css managed.

------------------------------------------------------------------------------------------

PAG_ID::32

Name: createRule

Description: adds a new rule to a board. Requires authentication. Restricted to the board owner.

Parameters:
    boardUri: URI of the board the user wishes to add a new rule to.
    rule: text of the rule. 512 characters.

------------------------------------------------------------------------------------------

PAG_ID::33

Name: deleteRule

Description: deletes a rule from a board. Requires authentication. Restricted to the board owner.

Parameters:
    boardUri: URI of the board to have a rule deleted.
    ruleIndex: index of the rule to be deleted.

------------------------------------------------------------------------------------------

PAG_ID::34

Name: saveEdit

Description: saves a new message for a posting. Requires authentication. Restricted to global staff and board staff.

Parameters:
    boardUri: URI of the board to have a posting edited.
    message*: new message of the posting. 2048 characters.
    threadId: id of the thread to be edited.
    postId: id of the post to be edited.
    
------------------------------------------------------------------------------------------

PAG_ID::35

Name: createFlag

Description: creates a new flag for the board. Requires authentication, reserved for the board owner. Requires one image uploaded.

Parameters:
    boardUri: URI of the board.
    flagName: name of the new flag. 16 characters.

------------------------------------------------------------------------------------------

PAG_ID::36

Name: deleteFlag

Description: Deletes a flag. Requires authentication, reserved for the board owner.

Parameters:
    flagId: id of the flag to be deleted.

------------------------------------------------------------------------------------------

PAG_ID::37

Name: saveGlobalSettings

Description: saves global settings. Requires authentication. Restricted to root users. Blank parameters will revert to the default.

Parameters:
    address: address to bind the server to.
    port(Number): port to be used by the server.
    fePath: path to the front-end directory to be used.
    boardPageSize(Number): amount of threads per board page.
    latestPostsCount(Number): amount of posts to be displayed on each thread on board pages.
    autoSageLimit(Number): amount of posts a thread can have before it enters auto-sage.
    threadLimit(Number): maximum amount of threads a board can have.
    tempDir: temporary directory to be used.
    senderEmail: sender e-mail to be used on automated e-mails.
    captchaExpiration(Number): amount of minutes before captchas expire.
    captchaFonts(Array): array of paths in the system of font files to be used by the captcha.
    siteTitle: title of the site.
    maxRequestSize(Number): maximum size in MB of incoming requests.
    maxFileSize(Number): maximum size in MB of uploaded files.
    acceptedMimes(Array): array of mimetypes allowed for uploads.
    maxFiles(Number): maximum amount of files to be uploaded at once.
    banMessage: message to be displayed on banned posts.
    logPageSize(Number): amount of entries shown on log pages.
    anonymousName: name to be used by default when the user does not input a name and the board owner didn't set one.
    topBoardsCount(Number): amount of boards to be picked as top boards.
    boardsPerPage(Number): amount of boards to be displayed on each page of the board listing.
    torSource: address to be used as the source of TOR exit nodes ip list.
    languagePack: path to an optional language pack.
    thumbSize(Number): maximum dimension for thumbnails.
    maxRules(Number): maximum amount of rules a board can have.
    maxFilters(Number): maximum amount of filters a board can have.
    maxVolunteers(Number): maximum amount of volunteers a board can have.
    maxBannerSize(Number): maximum size in KB allowed for banners.
    maxFlagSize(Number): maximum size in KB allowed for flags. 
    floodInterval(Number): amount of seconds users must wait before posting again so their post won't be discarded as flood.
    disable304(Boolean): disabled http response 304.
    verbose(Boolean): enables verbose mode on the server.
    mediaThumb(Boolean): generated thumbnails from media files.
    maintenance(Boolean): sets the server to maintenance mode.
    disableAccountCreation(Boolean): disables account creation.
    boardCreationRequirement(Number): defines the minimum global role required for users to create boards.
    multipleReports(Boolean): enables users to report multiple posts at once.
    serveArchive(Boolean): sets the server to serve archived files.
    archiveLevel(Number): level of archiving. 0 = no archives. 1 = only pages. 2 = pages and files.
    maxTags(Number): maximum amount of tags per board.
    disableFloodCheck(Boolean): disables flood checks.
    torAccess(Number): access level for TOR users.
    proxyAccess(Number): access level for proxy users.    
    clearIpMinRole(Number): minimum global role required so an user must be able to see non-hashed ips from users.
    thumbExtension: extension to be used on thumbnails.
    allowGlobalBoardModeration(Boolean): allows global staff to moderate boards.
    addons(Array): array of addons to be loaded.
    useGlobalBanners(Boolean): makes boards use the global banners.
    allowBoardCustomJs(Boolean): allows for boards to have custom javascript.
    globalLatestPosts(Number): amount of latest global latest posts that show appear on the front-page.
    forceCaptcha(Boolean): makes all boards use captcha.
    tcpPort(Number): port to be used for TCP.

------------------------------------------------------------------------------------------

PAG_ID::38

Name: setCustomSpoiler

Description: uploads a custom spoiler for a board. Requires authentication. Allowed only for board owners. If no file is sent, any set file will be removed.

Parameters:
    boardUri: URI of the board to have it's custom spoiler image managed.

------------------------------------------------------------------------------------------

PAG_ID::39

Name: deleteArchivedBoard

Description: deletes all files and threads from an archived board. Reserved for root and admins. Requires authentication.

Parameters:
    boardUri: uri of the board to be removed from files.

------------------------------------------------------------------------------------------

PAG_ID::40

Name: deleteArchivedThread

Description: deletes a thread from the archives. Reserved for root and admins. Requires authentication.

Parameters:
    boardUri: uri of the board containing the thread.
    threadId: id of the thread to be removed.

------------------------------------------------------------------------------------------

PAG_ID::41

Name: deleteArchivedUpload

Description: deletes an upload from the archives. Reserved for root and admins. Requires authentication.

Parameters:
    boardUri: uri of the board containing the thread.
    filename: names of the files to be removed separated by commas.

------------------------------------------------------------------------------------------

PAG_ID::42

Name: deleteFromIp

Description: deletes posts and threads from an ip from multiple boards. Requires authentication. Reserved for users with an role equal or lower than the global setting clearIpMinRole.

Parameters:
    ip*: ip to have its posts deleted.
    boards: uri of the boards to have posts from the informed ip deleted. If not informed, the posts from the ip will be deleted from all boards.

------------------------------------------------------------------------------------------

PAG_ID::43

Name: setCustomJs

Description: uploads a custom javascript for a board. Requires authentication. Reserved for board owners. If no file is sent, removes the custom js from the board.

Parameters:
    boardUri: uri of the board to have its's custom javascrip edited.

------------------------------------------------------------------------------------------

PAG_ID::44

Name: transferThread

Description: transfers a thread from a board to another. Requires authentication. Reserved for global staff.

Parameters:
    boardUri: uri of the board that contains the thread to be transferred.
    threadId: id of the thread to be transferred.
    boardUriDestination: uri of the board that will receive the thread.

Output: new id of the thread.

------------------------------------------------------------------------------------------

PAG_ID::45

Name: spoilFiles

Description: ban the ips of the selected posts and/or threads.

Parameters:
    postings(Array): array of content to be spoiled. Contains objects with the following fields:
        board: board to which the content belongs.
        thread: thread to be banned or that contains the post to be spoiled.
        post: post to be spoiled.

------------------------------------------------------------------------------------------

PAG_ID::46

Name: solveCaptcha

Description: solves a captcha without invalidating it.

Parameters:
    captchaId: id of the captcha to be solved.
    answer: answer to the captcha.    

------------------------------------------------------------------------------------------

*: mandatory parameters
**: exclusive funcionality to the json api.
